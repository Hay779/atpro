<!-- Fichier : contact.html -->
<!-- ... (tout le début de ton fichier HTML reste inchangé) ... -->

    </main>

    <!-- Pas de footer ici -->

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const contactForm = document.getElementById('contactForm');

            if (contactForm) {
                contactForm.addEventListener('submit', async function(event) {
                    // 1. Empêcher l'envoi traditionnel du formulaire
                    event.preventDefault();

                    const submitButton = contactForm.querySelector('button[type="submit"]');
                    const originalButtonText = submitButton.innerHTML;
                    submitButton.disabled = true;
                    submitButton.innerHTML = 'Envoi en cours...';

                    // 2. Récupérer les données du formulaire
                    const formData = new FormData(contactForm);
                    const data = Object.fromEntries(formData.entries());
                    // Convertir la valeur de la checkbox en booléen
                    data.rgpd = formData.has('rgpd');

                    try {
                        // 3. Envoyer les données au backend avec fetch
                        const response = await fetch('https://atpro.onrender.com/api/contact', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(data)
                        });

                        // 4. Analyser la réponse du serveur
                        if (response.ok) {
                            alert('Message envoyé avec succès ! Merci, nous vous recontacterons bientôt.');
                            contactForm.reset(); // Vider le formulaire
                        } else {
                            // Gérer les erreurs venant du serveur
                            const errorData = await response.json();
                            alert('Erreur lors de l\'envoi : ' + (errorData.message || 'Veuillez réessayer.'));
                        }
                    } catch (error) {
                        // Gérer les erreurs de réseau (serveur inaccessible, etc.)
                        console.error('Erreur de réseau:', error);
                        alert('Impossible de contacter le serveur. Veuillez vérifier votre connexion et réessayer.');
                    } finally {
                        // 5. Réactiver le bouton d'envoi
                        submitButton.disabled = false;
                        submitButton.innerHTML = originalButtonText;
                    }
                });
            }

            const openChatButton = document.getElementById('openChatButton');
            if (openChatButton) {
                openChatButton.addEventListener('click', function() {
                    alert("Le widget de chat devrait s'ouvrir ici ! (Intégration à faire)");
                });
            }
        });
    </script>
</body>
</html>